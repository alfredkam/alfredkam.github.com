<!DOCTYPE html>



 <html class="no-js"> 
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Alfred kam</title>

        <link rel='stylesheet' href='/components/bootstrap/dist/css/bootstrap.min.css' />
        <link rel='stylesheet' href='/css/base.css' />
        <link rel='stylesheet' href='/components/prismjs/prism-okaidia.css' />

        
        <link rel="stylesheet" href="/css/fontello-f19985b1/css/fontello.css" />
        <link rel="stylesheet" href="/css/fontello-f19985b1/css/animation.css" />
        

        
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css' />
        <script src='/components/jquery/jquery.min.js' type='text/javascript'></script>
    </head>
    <body>
        <header>
    
    <nav class="navbar navbar-default" role="navigation">
        <div class='container'>
            <div>
                <div class='col-xs-6'>
                   <a class="navbar-brand" href="/">Alfred Kam</a>
                </div>
                <div id='searchComponent' class='col-xs-6'>
                </div>
            </div>
            <div class='col-xs-12'>
                <div class="navbar-header col-sm-12 title">
                    <div class='col-sm-12'>
                        <span><a href='/'>Geeking out</a></span>
                    </div>
                </div>
            </div>
        </div>
        <div id='searchSpace'>
        </div>
    </nav>
    <div class='header-bg'></div>
</header>
<link rel='stylesheet' href='/css/index.css'/>
        <div class='container'>
            

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/the-recent-mvc-landscape-with-angular-react-and-backbone-react'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/the-recent-mvc-landscape-with-angular-react-and-backbone-react">The recent MVC landscape with Angular&#43;React and Backbone&#43;React</a></h1>
    <p class="author">
      <span class="date">Sun Jun 8, 2014</span>
    </p>
    <div class="content">
      <p>
    This post might bring in some arguments for both parties that favour one of the framework then the other, but this will be a worth while comparision to take a look at the recent MVC landscape.  Just to clarify - I'm still relatively new to Angular.
</p>
<p>
    Lets be clear - React is a component that is designed and focused to replace the 'V' component under a MVC framework.  The most recognise MVC frameworks are Backbone & Angular, and it's starting to increasingly standout that React is able to replace the 'V' component due to its virtual dom design, minimal exposure of real dom elements and data-binding handling.  It is also <a href='http://williambrownstreet.net/blog/2014/04/faster-angularjs-rendering-angularjs-and-reactjs/'>proven from this post</a> that Angular + React provides the fastest rendering.
</p>
<p>
    To achieve fast render and low inital load speed, the design of the component hierarchy structure is relatively important.  In Angular, React needs to be initiated at the controller. For Backbone, on the other hand needs to be initiated at the router.
</p>
<p>
    Link to <a href='http://plnkr.co/edit/7DKHQ6tR7TCKkR5bFURu?p=preview'>Angular+React Demo</a><br>
    Link to <a href='http://plnkr.co/edit/1mwjMNh0RQP8PVrinOmD?p=preview'>Backbone+React Demo</a><br>
</p>
<div class='row'>
    <div class='col-md-12'>
        <pre class='col-md-6'>
            <code class='language-javascript'>
                //Angular Example
                angular.module('fasterAngular', []).
                controller('mycontroller', ['$scope', function($scope){
                   $scope.framework = 'ReactJs';
                   $scope.data = [];
                   // Fill the data map with random data
                   $scope.refresh = function(){
                       for(var i = 0; i < 1500; ++i) {
                           $scope.data[i] = {};
                           for(var j = 0; j < 5; ++j) {
                               $scope.data[i][j] = Math.random();
                           }
                       }
                   }
                   
                   $scope.refresh();
                   
                   $scope.$watchCollection('data', function(newValue, oldValue){
                       React.renderComponent(
                           MYLIST({data:newValue}),
                           document.getElementById("fastRepeatArea")
                       );
                   })
                }])
            </code>
        </pre>

        <pre class='col-md-6'>
            <code class='language-javascript'>
                //Backbone example
                $(document).ready(function () {
                  new (Backbone.Router.extend({
                    initialize : function () {
                        var data = [];
                        var refresh = function () {
                          for(var i = 0; i < 1500; ++i) {
                                  data[i] = {};
                                  for(var j = 0; j < 5; ++j) {
                                      data[i][j] = Math.random();
                                  }
                              }
                          React.renderComponent(
                            MYLIST({data:data}),
                            document.getElementById("fastRepeatArea")
                          );
                        };
                        refresh();
                        $('button#refreshBtn').click(function () {
                          refresh();
                        });
                    },
                  }))();
                });
            </code>
        </pre>
    </div>
</div>
<p>
     React is initiated under the same flow and it would achieve the same render speed.  This example can be further improved by delegating the data change event and click event to React or using mixins to listen to partial changes. Instead of having it through the Angular controller or Backbone router.
</p>
<p>
    At this point, Angular+React and Backbone+React would be equivalent. Now lets take a look at the required components and initial loading speed.
</p>
<p>
    According to <a href='http://lhorie.github.io/mithril/'>Mithril</a>, Angular takes 7.49ms to load and Backbone takes 18.54ms to load.  Another important to note is Backbone is light weight but it still depends upon underscore & jquery.  Those add up during initial script request!
</p>
<p>
    I believe this pretty much dictates which combination is the go to framework for heavy web apps.  Every second counts to keep your user on your site!
</p>ntender in the market called Facebook React, I'll just call it React for short.  React is a 'View' Framework.  So in terms of a MVC, its the 'V' Component.  Suprisingly React further simplified the entire landscape of 'View' framework.  It only expose the real nodes that you have
</p>
<p>
  Lets see how this will look like in React, ive also included the propeller <a href='https://github.com/usepropeller/react.backbone'>react.backbone</a>.  It allows us to feed in backbone models into react and databind with mixin.
</p>

<p><pre>
  <code class='language-markup'>
      &lt;!&ndash; html structure &ndash;&gt;
      &#60;html&#62;
        &#60;body&#62;
        &#60;/body&#62;
      &#60;/html&#62;
  </code>
  <code class='language-javascript'>
    //javascript code
    /** @jsx React.DOM **/
    &lsquo;use strict&rsquo;;</p>

<pre><code>define ([
  'jquery', backbone', 'react', 'react.backbone'
], function (
  $, Backbone, React,
) {

  var CommentComponent = React.createBackboneClass({
    var comments = this.props.collection.map(function(item) {
      return (
        {item.get('comment')}
      )
    });
    return (
      &lt;div&gt;
        {comments}
      &lt;/div&gt;
    );
  });

  var StatsComponent = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt; 
          {/* html template */}
        &lt;/div&gt;
      );
    }
  });

  var MenuComponent = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt; 
          {/* html template */}
        &lt;/div&gt;
      );
    }
  });

  var WidgetLayout = React.createBackboneClass({
    componentWillMount : function () {
      this.collection = Backbone.Collection();
    },
    render : function () {
      return (
        &lt;StatsComponent /&gt;
        &lt;CommentsComponent collection={this.collection}/&gt;
      )
    };
  });

  var AppLayout = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt;
            &lt;MenuComponent /&gt;
            &lt;WidgetLayout /&gt;
        &lt;/div&gt;
      );
    };
  });
  React.renderComponent({
    &lt;AppLayout /&gt;,
    $('body')[0]
  });
});
</code></pre>

<p></code>
</pre>
<p>
  The code base is smaller, easier to understand and to control.  Now some may ask about Angular + React comparing with Backbone + React.  For this I&rsquo;ll leave it to next post, but this is now pretty clear Marionette is out of the game.
</p></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/goodbye-marionette-hello-react'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/goodbye-marionette-hello-react">Goodbye Marionette &amp; Hello React</a></h1>
    <p class="author">
      <span class="date">Wed May 28, 2014</span>
    </p>
    <div class="content">
      <p>
     I have been developing a lot of large javascript web apps that requires a lot of subview management or componets and decentralize the model dependecies to better suit the component re-usability.  It was not till early this year, I was still designing them with Backbone + Marionette.  Now it's <b>Backbone + React or Angular + React</b>.  For this post let's concentrate in comparing Backbone + Mariontte & Backbone + React.   

     As we all know, Backbone 'View' itself is a design flaw.  It had a lot of issues regarding its memory management and sub view management.  Marionette on the other hand, did help solved the sub view management and memory issues by offering a wide range of common designs and design patterns to help build the application.
</p>

<p>
    Although Marionette provided a decent way to handle layout, subviews and code management, it is still too dependent on Backbone and gets more complex upon further sub view nesting. In Marionette the view is represented as a tree, the subviews is also part of the tree, thus if to render the middle layer must destruct and a rebuilt must occur. As well as rendering multiple Marionette Layers and Regions, although these Marionette functionalites are really awesome which helped took out the pain in backbone. While nesting those components doesnt play nicely with each other and hard to decouple, causing the sub layouts and sub regions to have an event show fire before its parent fires the show event.
</p>
<p>
    Consider in Marionette, you used a layout to display a widget on a page.  Within the widget there is also a layout before it calls the itemview.  In other words nested layout then itemview.
</p>
<div class='row'>
  <div class='col-md-12'>
    <img style='width:100%' src='/img/layout-example-marionette+react.svg'></img>
  </div>
</div>
<pre class='language-javascript'>
    <code class='language-markup'>
      <!-- html structure -->
      &#60;html&#62;
        &#60;body&#62;
          <div id='menu'>
          </div>
          <div id='widget'>
          </div>
          <script id="some-template" type="text/html">
            <ul>
              <% _.each(items, function(item){ %>
              <li> <%= item.someAttribute %> </li>
              <% }); %>
            </ul>
          </script>

          <script id="some-comment-template" type="text/html">
            <ul>
                <li><%= item.someAttribute %> </li>
            </ul>
          </script>

          <script id="widget-layout-template" type="text/html">
            <div id='stats-region'>
            </div>
            <div id='comment-region'>
            </div>
          </script>
        &#60;/body&#62;
      &#60;/html&#62;
    </code>
    <code class='language-javascript'>
      //javascript code
      'use strict';

      define([
        'backbone', 'marionette'
      ], function(
        Backbone, Marionette
      ) {
        var AppLayout = Backbone.Marionette.Layout.extend({
          template : '#some-layout-template'
          regions : {
            widget : '#widget',
            menu : '#menu'  
          }
        });

        var MenuItem = Backbone.Marionette.IteView.extend({
          template : '#some-template'
        });

        var CommentItem = Backbone.Marionette.ItemView.extend({
          template : '#some-comment-template'
        });

        var StatsItem = Backbone.Marionette.ItemView.extend({
          template : '#some-template'
        });

        var CommentsCompositeView = Backbone.CompositeView.extend({
          template : '#some-comment-template',
          itemView : CommentItem
        });

        var WidgetLayout = Backbone.Marionette.Layout.extend({
          initialize : function () {
            this.collection = new Backbone.Collection();
          },
          template : '#widget-layout-template',
          regions : {
            stats : new Marionette.Region({
              el : "#stats-region"
            })
            comments : new Marionette.Region({
              el : '#comment-region'
            })
          },
          onShow : function () {
            this.regions.stats.show(new StatsItem(
              model : someModel
            ));
            this.regions.comments.show(new CommentsCompositeView({
              collection : this.collection
            }));
          }
        });

        var layout = new AppLayout();
        layout.render();
        layout.widget.show(new WidgetLayout());
        layout.menu.show(new MenuItem());
      });
    </code>
</pre>
<p>
  In this example we will run into a render issue with the sub region fire before the parent does.
</p>
<p>
  Now came 2014 and there is a new contender in the market called Facebook React, I'll just call it React for short.  React is a 'View' Framework.  So in terms of a MVC, its the 'V' Component.  Suprisingly React further simplified the entire landscape of 'View' framework.  It only expose the real nodes that you have
</p>
<p>
  Lets see how this will look like in React, ive also included the propeller <a href='https://github.com/usepropeller/react.backbone'>react.backbone</a>.  It allows us to feed in backbone models into react and databind with mixin.
</p>

<p><pre>
  <code class='language-markup'>
      &lt;!&ndash; html structure &ndash;&gt;
      &#60;html&#62;
        &#60;body&#62;
        &#60;/body&#62;
      &#60;/html&#62;
  </code>
  <code class='language-javascript'>
    //javascript code
    /** @jsx React.DOM **/
    &lsquo;use strict&rsquo;;</p>

<pre><code>define ([
  'jquery', backbone', 'react', 'react.backbone'
], function (
  $, Backbone, React,
) {

  var CommentComponent = React.createBackboneClass({
    var comments = this.props.collection.map(function(item) {
      return (
        {item.get('comment')}
      )
    });
    return (
      &lt;div&gt;
        {comments}
      &lt;/div&gt;
    );
  });

  var StatsComponent = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt; 
          {/* html template */}
        &lt;/div&gt;
      );
    }
  });

  var MenuComponent = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt; 
          {/* html template */}
        &lt;/div&gt;
      );
    }
  });

  var WidgetLayout = React.createBackboneClass({
    componentWillMount : function () {
      this.collection = Backbone.Collection();
    },
    render : function () {
      return (
        &lt;StatsComponent /&gt;
        &lt;CommentsComponent collection={this.collection}/&gt;
      )
    };
  });

  var AppLayout = React.createBackboneClass({
    render : function () {
      return (
        &lt;div&gt;
            &lt;MenuComponent /&gt;
            &lt;WidgetLayout /&gt;
        &lt;/div&gt;
      );
    };
  });
  React.renderComponent({
    &lt;AppLayout /&gt;,
    $('body')[0]
  });
});
</code></pre>

<p></code>
</pre>
<p>
  The code base is smaller, easier to understand and to control.  Now some may ask about Angular + React comparing with Backbone + React.  For this I&rsquo;ll leave it to next post, but this is now pretty clear Marionette is out of the game.
</p></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/moving-to-jekyll'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/moving-to-jekyll">moving to jekyll</a></h1>
    <p class="author">
      <span class="date">Sun May 25, 2014</span>
    </p>
    <div class="content">
      <p>Alright I'm a hacker and lazy to work myself around Wordpress - which is in php & dynamic content.  Now recently migrated into Jekyll and use github to serve my pages - free CDN and fast static content! Woohoo</p>

<p>I will be re-building the site from scratch, so beware for the next couple of weeks</p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/installing-mysql-python-on-mac'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/installing-mysql-python-on-mac">installing mysql-python on mac</a></h1>
    <p class="author">
      <span class="date">Tue Feb 18, 2014</span>
    </p>
    <div class="content">
      <p>Awesome next challenge - running a flask server to connect to a MAMP [2.1.3] sql server on a mac (mavericks).  Flask is a light weight python server and uses flask-sqlalchemy to connect.  Installing mysql-python seems to be a challenge.</p>
<pre><code class='language-bash'>
#assuming you've already installed xcode & homebrew
brew install mysql   #use brew install mysql --universal if your not using 64bit
</code></pre>
<p>Go to <a href="http://dev.mysql.com/downloads/mysql/">dev mysql</a><br />
download the latest release and decompress the file.</p>
<pre><code class='language-bash'>
cd /path/to/download/
tar -xvf mysql-*.tar.gz
cd /path/to/extract/
mkdir /Applications/MAMP/Library/include
cp -r include/* /Applications/MAMP/Library/include
cp -r lib/* /Applications/MAMP/Library/lib

export ARCHFLAGS="-arch $(uname -m)"
export PATH=$PATH:/Applications/MAMP/Library/bin
export DYLD_LIBRARY_PATH=/Applications/MAMP/Library/lib

sudo easy_install mysql-python
</code></pre>
<p>FYI: this line will cause trouble with git</p>
<pre><code class='language-bash'>
export DYLD_LIBRARY_PATH=/Applications/MAMP/Library/lib
</code></pre>
<p>Rebooting your computer will clear it.</p>
<p>On a side note, when your connecting to the MAMP sql, python may complain mysql.sock is missing.  It is located under</p>
<pre><code class='language-bash'>
/Applications/MAMP/tmp/mysql/mysql.sock
</code></pre>
<p><strong>Additional Source</strong><br />
<a href="http://racingtadpole.com/blog/mamp-python-and-mysqldb/">mamp-python-mysql</a><br />
<a href="http://stackoverflow.com/questions/17920115/python-mysqldb-again-symbol-not-found-mysql-affected-rows">stackoverflow</a></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/nginx-nodejs-stack-setup'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/nginx-nodejs-stack-setup">nginx / nodejs stack setup</a></h1>
    <p class="author">
      <span class="date">Mon Feb 17, 2014</span>
    </p>
    <div class="content">
      <p>So when you have an nginx + nodejs combo, you want to use <i>nginx to port foward to nodejs</i></p>
<p>my nodejs uses forever to run on port 3000.</p>
<p>here is the nginx config setup</p>
<pre>
<code class="language-bash">
sudo vi /etc/nginx/site-enabled/default
</code>
</pre>
<pre>
<code class="language-bash">
#add this line before server { ... }
[...]
upstream app_nodejs {
        server localhost:3000;
}
[...]

#now in server {...}, assuming you want to map your url root to point to nodejs
location / {
               proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
               proxy_set_header Host $http_host;
               proxy_set_header X-NginX-Proxy true;

               proxy_pass http://app_nodejs;
               proxy_redirect off;
           }

</code>
</pre>
<p>Cheers</p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/using-git-hooks-to-deploy-server-with-forever'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/using-git-hooks-to-deploy-server-with-forever">using git hooks to deploy server with forever</a></h1>
    <p class="author">
      <span class="date">Mon Feb 17, 2014</span>
    </p>
    <div class="content">
      <p>If you love deploying with automation and you love the fact you dont need to touch your server (which you should!).  I've setup this up on an ec2 ubuntu 12.04 LTS, shouldnt differ too much with other ubuntu versions.  At this time of writing i'm setting up a nodejs / flask server</p>
<p>On your remote server</p>
<pre><code class='language-markup'>
#install forever and give it global access
sudo npm install -g forever
</code></pre>
<pre><code class='language-markup'>
#setup git bare at your deployment server
git clone --bare [repo url]
</code></pre>
<pre><code class='language-markup'>
#add the hooks
#navigate into your git folder
cd path/to/repo/hooks
vi pre-receive
</code></pre>
<pre><code class='language-bash'>
#!/bin/sh
echo "stopping server service"
service nodejs-www stop
</code></pre>
<pre><code class='language-bash'>
vi post-receive
</code></pre>
<pre><code class='language-bash'>
#!/bin/sh
echo "checkout the files"

branch=$(git branch | grep "*" | sed "s/* //")

if [ "$branch" = "master" ]
then
        echo "Master branch"
        git --work-tree=/home/ubuntu/app/www checkout -f
        echo "Successfully checked out master branch"
else
        echo "Not master branch"
fi

echo "start service"
service nodejs-www start
</code></pre>
<pre><code class='language-markup'>
sudo chmod +x pre-receive;
sudo chmod +x post-receive;
</code></pre>
<p>FYI: Just make sure the folders are created for the "git --work-tree"</p>
<pre><code class='language-markup'>
#navigate into init.d to create a service
cd /etc/init.d
sudo vi nodejs-www
</code></pre>
<pre><code class='language-bash'>
#! /bin/sh
# /etc/init.d/nodejs-www
#

NAME=nodejs-www
APP=index.js
APP_DIR=/home/ubuntu/app/www
forever=/usr/local/bin/forever
export PATH=$PATH:/usr/local/bin/
LOG=/var/log/nodejs-www.log

case "$1" in
  start)
    cd $APP_DIR
    echo "Starting $NAME"
    #I detached the message to 'screen', it is not a requirement
    screen -d -m /usr/bin/sudo -u ubuntu $forever --minUptime 5000 --spinSleepTime 2000 -a -l $LOG start $APP
    #if to run a python server use
    #screen -d -m /usr/bin/sudo -u ubuntu $forever --minUptime 5000 --spinSleepTime 2000 -a -l $LOG start -c python $APP
    echo "Started $Name"
    exit 0
    ;;
  stop)
    echo "Stopping script $NAME"
    cd $APP_DIR
    /usr/bin/sudo -u ubuntu $forever stop $APP
    exit 0
    ;;
  list)
    echo "List"
    /usr/bin/sudo -u ubuntu $forever list
    exit 0
    ;;
  *)
    echo "Usage: /etc/init.d/nodejs-www {start|stop|list}"
    exit 1
    ;;
esac

exit 0
</code></pre>
<p>FYI: Many others were able to run forever directly without having "/usr/bin/sudo -u ubuntu" (ubuntu is the user account) or substituting it with "sudo".  For my case on an amazon aws, without it, i ran into permission issues with forever and nodejs directory mapping issues.</p>
<p>A permission error similar to this:</p>
<pre><code class='language-javascript'>
fs.js:0
(function (exports, require, module, __filename, __dirname) { // Copyright Joy
^
Error: EACCES, permission denied '/root/.forever/pids/FepR.pid'
    at Object.fs.openSync (fs.js:410:18)
    at Object.fs.writeFileSync (fs.js:956:15)
    at writePid (/usr/local/lib/node_modules/forever/bin/monitor:13:6)
    at null.<anonymous> (/usr/local/lib/node_modules/forever/bin/monitor:46:5)
    at EventEmitter.emit (/usr/local/lib/node_modules/forever/node_modules/forever-monitor/node_modules/broadway/node_modules/eventemitter2/lib/eventemitter2.js:332:22)
    at /usr/local/lib/node_modules/forever/node_modules/forever-monitor/lib/forever-monitor/monitor.js:153:10
</code></pre>
<p>Now to wrap up the server side</p>
<pre><code class='language-markup'>
sudo chmod a+x nodejs-www
cd /var/log
sudo touch nodejs-www.log
sudo chmod 777 nodejs-www.log
</code></pre>
<p>Add to rc.local to start upon server start</p>
<pre><code class='language-markup'>
sudo vi /etc/rc.local
</code></pre>
<pre><code class='language-markup'>
#!/bin/sh -e
service nodejs-www start
exit 0
</code></pre>
<p>For some you may need to change the rc.local permission to executable.</p>
<p>If i didnt miss anything this should it for the server</p>
<p>Now on client side</p>
<pre><code class='language-markup'>
cd path/to/repo
git remote add deploy [remote server repo url]
git commit -am 'test deploy'
git push deploy master
</code></pre>
<p>This should be it, and the service should automatically stop and restart itself.  If i missed anything let me know :)</p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/nginx-with-phpmyadmin-setup'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/nginx-with-phpmyadmin-setup">nginx with changed phpmyadmin directory setup</a></h1>
    <p class="author">
      <span class="date">Mon Feb 17, 2014</span>
    </p>
    <div class="content">
      <p>Recently decided to setup a nginx / python / mysql lightweight backend to interact with a nodejs services.   So decided to change phpmyadmin directory as well - i did run into 502 / 403 nginx errors, hope this post will help anyone who had the same issues too.</p>
<p>Setup process - assuming you are using ubuntu 12.04LTS</p>
<pre>
<code class="language-markup">
#install mysql & nginx
sudo apt-get install mysql-server mysql-client
sudo apt-get install nginx

#start nginx
sudo service nginx start

#install php5 & phpmyadmin
sudo apt-get install php5-fpm php5-mysql php5-curl php5-gd php5-intl php-pear php5-imagick php5-imap php5-mcrypt php5-memcache php5-ming php5-ps php5-pspell php5-recode php5-snmp php5-sqlite php5-tidy php5-xmlrpc php5-xsl php5-xcache phpmyadmin

#reload php5
sudo service php5-fpm reload
</code>
</pre>
<pre>
<code class="language-markup">
#modify php5-fpm
sudo vi /etc/php5/fpm/pool.d/www.conf
</code>
</pre>
<pre><code class="language-bash">
#look for listen and modify as follow
[...]
;listen = 127.0.0.1:9000
listen = /tmp/php5-fpm.sock
[...]
</code>
</pre>
<pre>
<code class="language-markup">
#setup nginx config
sudo vi /etc/nginx/site-enabled/default
</code>
</pre>
<pre>
<code class="language-bash">
#add this after location /
[...]
location /pma {
    alias /usr/share/phpmyadmin/;
}

location ~ ^/pma/(.*\.(js|css|gif|jpg|png))$ {
    alias /usr/share/phpmyadmin/$1;
}

location ~ ^/pma(.+\.php)$ {
    alias /usr/share/phpmyadmin$1;
    fastcgi_pass unix:/tpm/php5-fpm.sock;
    fastcgi_index index.php;

    charset utf8;

    include fastcgi_params;
    fastcgi_param DOCUMENT_ROOT /usr/share/phpmyadmin;
}

#if you want to enable php site wide
location ~ \.php$ {
                try_files $uri =404;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/tmp/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
}
[...]
</code>
</pre>
<pre>
<code class="language-markup">
sudo service nginx reload
</code>
</pre>
<p>FYI: The most common 502 / 403 errors are due to this line in the nginx config file. </p>
<pre>
<code class="language-bash">
fastcgi_pass unix:/tmp/php5-fpm.sock; #example using unix:/var/run/php-fpm.sock; 
</code>
</pre>
<p>Hopefully this post will help some travellers here.</p>
<p><b>Source</b><br>
<a href="http://stackoverflow.com/questions/17359413/nginx-change-phpmyadmin-directory">stackoverflow</a><br />
<a href="http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-lemp-on-ubuntu-12.04-lts">howtoforge</a></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/typical-way-of-starting-a-startup'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/typical-way-of-starting-a-startup">Typical way of starting a startup</a></h1>
    <p class="author">
      <span class="date">Fri May 24, 2013</span>
    </p>
    <div class="content">
      <p>Found this gold on the net.  Felt should keep a record here :)</p>
<p><a href="/img/2013/05/startup-cycle.png"><img src="/img/2013/05/startup-cycle.png" alt="startup-cycle" width="600" height="482" class="alignnone size-medium wp-image-251" /></a></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/online-presence'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/online-presence">Online Presence</a></h1>
    <p class="author">
      <span class="date">Thu May 16, 2013</span>
    </p>
    <div class="content">
      <p>Previously my co-founder <a href="http://twitter.com/andrewcboos">Andrew Boos</a> followed up on the topic of <a href='http://andrewboos.com/the-difference-between-vcs-and-angels-reboot/'>difference of VCs and Angels</a>. Continuo on the topic of start ups, this time lets cover online presence.</p>
<p>Your startup's online presence is relatively important to represent who you are, your cool product and how your customers can benefit from using it. In our startup <a href="http://appfuel.me">Appfuel</a>, it took us a good 2 months to get it straight. Resulting an increase of web traffic.</p>
<p>Spilling the beans:<br />
1. Active social presence in<br />
- Facebook page<br />
- Twitter Profile<br />
- AngelList</p>
<p>Your social presence represents what your startup is made out off. Using these social platforms to pump out messages, cool stories and keep you consumer of interest up to date.</p>
<p>There are great tools such as <a href="http://bufferapp.com">Buffer</a>, <a href="http://ifttt.com">if this then that</a> to help you manage.</p>
<p>2. Landing Page<br />
When someone first enters into your site, with average browser size of 1280px  * 720px on desktops and 320px *  480px on mobile. That is some relatively small space, but hey! That will determine if the user will continue reading on. You should spice up the landing page's image, and it will determine if the reader will continue reading on.</p>
<p>3. SEO ( Search Engine Optimization)<br />
Another method to deliver organic traffic to your site are through searches. Make sure you have included meta tags of "description" and "keywords"; A short info in how you can help them; Submit your sitemap into the search engines.</p>
<p>4. Blog<br />
Posting relavent information, tips, stories for the consumer drives relavent traffic and ultimately landing in as your customer.</p>
<p>There are tools such as <a href="http://hittail.com">hittail</a> and google analytics to help you drill down to specific keywords that are driving traffic to your site.</p>
<p>As for ours we spiced up our blog a little bit just so the travellers can read the relavent posts, picture below.</p>
<p><a href="/img/2013/05/Screen-Shot-2013-05-15-at-8.23.07-PM.png"><img class="alignnone size-medium wp-image-233" alt="IAMA - mortal - dev - show all" src="/img/2013/05/Screen-Shot-2013-05-15-at-8.23.07-PM.png" width="600" height="114" /></a></p>

    </div>
  </section>
</div>

  <div class='row'>
  <div class='col-md-1'>
      <div class='commentCount'>
        <a href='http://alfredkam.com'>
          <span>
            <l class='icon-chat-alt'></l>
          </span>
          <span>
            <a href="http://alfredkam.com#disqus_thread">
                0
            </a>
          </span>
        </a>
        <div>
          <span class='views' data-url='http://alfredkam.com/js-function-crib-sheet'><i class='icon-eye'></i>0</span>
        </div>
      </div>
  </div>
  <section class='post col-md-10'>
    <h1><a href="http://alfredkam.com/js-function-crib-sheet">JavaScript Function Crib Sheet</a></h1>
    <p class="author">
      <span class="date">Wed May 8, 2013</span>
    </p>
    <div class="content">
      <p>Getting Lazy! So created a javascript function cheat sheet to share with the travellers here.  Hope it will be help many of you.</p>
<p>The cryptsheet includes these functions and can be found here : <a href='https://github.com/alfredkam/jsFunctions'>https://github.com/alfredkam/jsFunctions</a></p>
<p>General Laziness::<br />
- jquery toggle string<br />
- jquery enter keyup event</p>
<p>Mathematical Functions::<br />
- n choose r<br />
- Binomial Distribution<br />
- Probability Mass Function  (Useful when wanted to create a bell curve)<br />
- Summation</p>
<p>If the function your missing is not listed, comment below and i may be able to write one.</p>

    </div>
  </section>
</div>

<div class='row'>
  <div class='col-md-1'></div>
  <div class='col-md-10'>
  
    
    <ul class="pagination">
        
        <li>
            <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        class="disabled">
        <a href="" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        class="active"><a href="/">1</a></li>
        
        <li
        ><a href="/page/2/">2</a></li>
        
        <li
        ><a href="/page/3/">3</a></li>
        
        <li
        >
        <a href="/page/2/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="/page/3/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
  </div>
</div>
<script type='text/javascript'>
    (function () {
      $('.views').each(function () {
        var self = this;
        var url = $(self).data('url').replace(/.*(\/[0-9\-a-zA-Z]+$)/,function (match, p1) {
          return p1 || 0;
        });
        $.ajax( 
            'http://nerd.alfredkam.com/blog'+ url +'/count?api_key=276fmAeE7ZqRl&include=false'
        ).done(function (data) {
            $(self).html("<i class='icon-eye'></i>"+data.views);
        }).fail (function (hx, text, err) {
            console.log(err, text);
        });
      });
    })();
</script>
<script type="text/javascript">
   
  var disqus_shortname = 'alfredkam'; 

   
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>
        </div>
    </body>
<footer>
  <div class='col-md-10 col-md-offset-1'>
      <div class='row'>
        <div class='col-md-4'>
          <h4>
            About
          </h4>
          <div class='row'>
            <div class='col-xs-4'>
              <img src='http://www.gravatar.com/avatar/d9b3f7a32a3bf559aad23694c73eb8cc.png' style='width:100%'></img>
            </div>
            <p class='col-xs-8'>
              Hello! I'm an Entrepreneur & Developer with primiary focus in javascript.  I'm also active in the field of computational biology.
            </p>
          </div>
        </div>
        <div class='col-xs-4'>
          <h4>
            Notable Works
          </h4>
          <p>
            <a href='http://appfuel.me'>Appfuel</a><br>
            <a href='http://phylo.cs.mcgill.ca'>PHYLO</a><br>
            <a href='http://yako.io'>Yako</a><br>
            <a href='/portfolio'>> More</a>
          </p>
        </div>
        <div class='col-sm-4'>
          <h4>
            Stalking Aids
          </h4>
          <p class='socialBtns'>
            <a href='http://github.com/alfredkam'><i class='icon-github'></i></a>
            <a href='https://twitter.com/alfredkam'><i class='icon-twitter'></i></a>
            <a href='http://www.linkedin.com/in/kamalfred'><i class='icon-linkedin'></i></a>
          </p>
        </div>
      </div>
      <div class='row'>
        <div class='col-md-12 copyright-info'>
          Alfred Kam &#169; 2015
        </div>
      </div>
  </div> 
</footer>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('require', 'displayfeatures');
  ga('create', 'UA-25416273-1', 'alfredkam.com');
  ga('send', 'pageview');
</script>
<script src='/components/lodash/dist/lodash.min.js' type='text/javascript'></script>

<script type='text/javascript'>
  $('code').each(function () {
    var html = _.escape($(this).html());
    html = html.replace(/&amp;lt;/g,'&lt;');
    html = html.replace(/&amp;gt;/g,'&gt;');
    $(this).html(html);
  });
</script>
<script src='/components/bootstrap/dist/js/bootstrap.min.js' type='text/javascript'></script>
<script src='/scripts/base.js' type='text/javascript'></script>
<script src='/components/prismjs/prism.js' type='text/javascript'/></script>
<script src='/components/prismjs/components/prism-markup.min.js' type="text/javascript"></script>
<script src='/components/prismjs/components/prism-bash.min.js' type='text/javascript'></script>
<script src='/components/prismjs/components/prism-css.min.js' type='text/javascript'></script>
<script src='/components/prismjs/components/prism-javascript.min.js' type='text/javascript'></script>
<script src='/components/prismjs/components/prism-python.min.js' type="text/javascript"></script>
<script src='/components/react/react.min.js' type='text/javascript'></script>
<script src='/components/react/JSXTransformer.js' type='text/javascript'></script>
<script src='/scripts/searchComponent.js' type='text/jsx'></script>
</html>
